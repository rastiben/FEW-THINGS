<html>
    <head>
       <link href="./css/bootstrap.css" rel="stylesheet" type="text/css">
       <style>
            .tables {
                margin-bottom: 25px;
            }
        
           hr{
               border: 1px solid black !important;    
           }
           
           .title div{
               margin-bottom: 30px;
               margin-top: 30px;
               font-size: 25px;
           }
           
        </style>
    </head>
    <body>
       
            <div class="groupes">
               <div class="title">
                   <div class="col-md-4 text-center">TOUR 1</div>
                   <div class="col-md-4 text-center">TOUR 2</div>
                   <div class="col-md-4 text-center">TOUR 3</div>
               </div>
                <div class="groupe col-md-12">
                   <div class="tables col-md-12"></div>
                   <div class="tables col-md-12"></div>
                   <div class="tables col-md-12"></div>
                   <div class="tables col-md-12"></div>
                   <div class="tables col-md-12"></div>
                   <div class="tables col-md-12"></div>
                   <div class="tables col-md-12"></div>
                   <div class="tables col-md-12"></div>
                   <div class="tables col-md-12"></div>
                   <div class="tables col-md-12"></div>
                </div>
                <hr>
                <div class="groupe col-md-12">
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                </div>
                <hr>
                <div class="groupe col-md-12">
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                </div>
                <hr>
                <div class="groupe col-md-12">
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                </div>
                <hr>
                <div class="groupe col-md-12">
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                </div>
                <hr>
                <div class="groupe col-md-12">
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                    <div class="tables col-md-12"></div>
                </div>
            </div>
            <div class="personnes">
                <table class="table table-striped">
                    <thead>
                        <th>Nom</th>
                        <th>Association</th>
                        <th>Groupe</th>
                        <th>Tour 1</th>
                        <th>Tour 2</th>
                        <th>Tour 3</th>
                    </thead>
                    <tbody>
                        
                    </tbody>
                </table>
            </div>
        
        <script src="./js/jquery-3.2.1.min.js"></script>
        <script src = "./js/faker.min.js" type = "text/javascript"></script>
        
        <script>
            var associations = [];
            var personnes = [];
            var groupes = [[],[],[],[],[],[]];
            
            for(var i = 0;i<groupes.length;i++){
                for(var j =0;j<10;j++){
                    groupes[i].push([]);
                }
            }
            
            for(var i = 0;i < 75;i++){
                var value = undefined;
                do{
                    value = faker.company.companyName();
                }
                while(associations.includes(value));
                
                associations.push(value);
            }
            
            /*REMPLISSAGE DES TABLES - CREATION DU PREMIER TOUR*/
            
            var indexAssoc = 0;
            var indexGroupes = 0;
            var indexTable = 0;
            
            for(var i = 0;i<associations.length;i++){
                for(var j= 0;j<6;j++){
                    var personne = {name:faker.name.findName(),association:associations[i],groupe:indexGroupes,t1:indexTable};
                    personnes.push(personne);
                    groupes[indexGroupes][indexTable].push(personne);   
                    
                    indexGroupes += 1;
                    if(indexGroupes%6 == 0){
                        indexGroupes = 0;
                        indexTable += 1;
                        if(indexTable == 10)
                            indexTable = 0;
                    }
                }
            }

            
            /*CALCULE DU DEUXIEME TOUR (A REPETER POUR UN TROISIEME)*/
            $.each($('.groupe'),function(keyG,groupe){
                $.each($('.tables',groupe),function(keyT,table){
                    $(table).append('<div class="t'+k+' col-md-4">');
                    $.each(groupes[keyG][keyT],function(keyU,user){
                        $('.t'+k,table).append('<p><b>'+user.name+'</b> - '+user.association+'</p>');
                    });
                });
            });
            
            /*AFFICHAGE*/
            for(var k =1;k<3;k++)
            {
                            indexGroupes = 0;
                indexTable = 0;

                var temp = [[],[],[],[],[],[]];

                for(var i = 0;i<temp.length;i++){
                    for(var j =0;j<10;j++){
                        temp[i].push([]);
                    }
                }

                $.each($('.groupe'),function(keyG,groupe){
                    $.each($('.tables',groupe),function(keyT,table){
                        $.each(groupes[keyG][keyT],function(key,user){
                            if(indexTable + 1 == 10)
                                indexTable = -1;

                            temp[keyG][indexTable+1].push(user);
                            user['t'+(k+1)] = indexTable+1;

                            indexTable += 1;
                        });
                        indexTable = keyT+1;
                    });
                    indexTable = 0;
                });
                
                groupes = temp;
                
                $.each($('.groupe'),function(keyG,groupe){
                    $.each($('.tables',groupe),function(keyT,table){
                        $(table).append('<div class="t'+k+' col-md-4">');
                        $.each(groupes[keyG][keyT],function(keyU,user){
                            $('.t'+k,table).append('<p><b>'+user.name+'</b> - '+user.association+'</p>');
                        });
                    });
                });
                
            }
            
            
            $.each(personnes,function(key,personne){
                $('table').append('<tr><td>'+personne.name+'</td><td>'+personne.association+'</td><td>'+personne.groupe+'</td><td>'+personne.t1+'</td><td>'+personne.t2+'</td><td>'+personne.t3+'</td></tr>');
            });
            
            
            
            
        </script>
        
    </body>
</html>